fn main() {
    let ch1 = make[chan int](1);
    let ch2 = make[chan int](1);

    ch1 <- 1;
    ch2 <- 2;

    select {
    case let x = <-ch1 => {
        println("Received from ch1:");
        println(x);
    }
    case let y = <-ch2 => {
        println("Received from ch2:");
        println(y);
    }
    }

    select {
    case ch1 <- 3 => {
        println("Sent 3 to ch1");
    }
    case default => {
        println("Default case (should not happen if ch1 has space, but it is full)");
    }
    }
    
    // Drain ch1
    let z = <-ch1;
    println("Drained:");
    println(z);
    
    select {
    case ch1 <- 4 => {
        println("Sent 4 to ch1");
    }
    case default => {
        println("Default case (should not happen)");
    }
    }
}
