package main;

fn test_return_in_if() -> int {
    let x = if true {
        return 100; // Should return 100 from function
        42
    } else {
        0
    };
    return x;
}

fn main() {
    // 1. Test explicit return inside if-expr (flattening optimization)
    let ret = test_return_in_if();
    println(ret); // Expect 100

    // 2. Test IIFE path (argument to function)
    println(if true { 200 } else { 0 }); // Expect 200

    // 3. Test IIFE path (math operand)
    let y = 10 + (if false { 5 } else { 20 });
    println(y); // Expect 30

    // 4. Test nested if (mixed paths)
    let z = if true {
        if false { 1 } else { 2 }
    } else {
        3
    };
    println(z); // Expect 2
}

